---
title: "Developer Guide"
description: "Set up the Reducation platform locally, architecture conventions, and developer best practices."
---

## Getting Started with Development

### Prerequisites

Required software:
- Node.js 18.x or later
- npm 9.x or later
- Git
- Modern browser (Chrome, Firefox, Edge)
- Code editor (VS Code recommended)

Recommended VS Code extensions:
- ESLint
- Prettier
- Tailwind CSS IntelliSense
- TypeScript and JavaScript Language Features

### Local Setup

1) Clone the repository
```bash
git clone <repository-url>
cd reducation-platform
```

2) Install dependencies
```bash
npm install
```

3) Environment configuration  
Create `.env.local`:
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

4) Start development server
```bash
npm run dev
```

5) Access application
- Frontend: http://localhost:5173
- Supabase Studio: Your Supabase dashboard URL

### Project Structure

```
reducation-platform/
├── src/
│   ├── pages/                 # Route pages
│   │   ├── Index.tsx         # Dashboard
│   │   ├── LessonPlanning.tsx
│   │   ├── ContentCreation.tsx
│   │   ├── Research.tsx
│   │   ├── MindMaps.tsx
│   │   ├── Classes.tsx
│   │   ├── Reports.tsx
│   │   └── ...
│   ├── components/           # React components
│   │   ├── auth/             # Authentication
│   │   ├── classes/          # Class management
│   │   ├── content-creation/ # Content generators
│   │   ├── dashboard/        # Dashboard widgets
│   │   ├── layout/           # Layout components
│   │   ├── lesson-planning/  # Lesson planning
│   │   ├── mindmap/          # Mind mapping
│   │   └── ui/               # Base UI components
│   ├── contexts/             # React contexts
│   │   └── AuthContext.tsx   # Authentication context
│   ├── hooks/                # Custom React hooks
│   │   ├── useAuth.ts
│   │   ├── useLessons.ts
│   │   └── ...
│   ├── integrations/         # External services
│   │   └── supabase/
│   │       ├── client.ts     # Supabase client
│   │       └── types.ts      # Generated types
│   ├── lib/                  # Utilities
│   │   └── utils.ts          # Helper functions (cn, formatters)
│   ├── App.tsx               # App root
│   └── main.tsx              # Entry point
├── supabase/
│   ├── functions/            # Edge functions (Deno)
│   │   ├── ai-lesson-generator/
│   │   ├── ai-worksheet-generator/
│   │   ├── ai-podcast-generator/
│   │   └── ...
│   └── migrations/           # Database migrations
├── public/                   # Static assets
├── index.html                # HTML entry
├── package.json              # Dependencies
├── tsconfig.json             # TypeScript config
├── tailwind.config.ts        # Tailwind config
└── vite.config.ts            # Vite config
```

---

## Component Development

### Base Component Template

```tsx
import React from 'react';
import { cn } from 'lib/utils';

interface MyComponentProps {
  title: string;
  description?: string;
  className?: string;
  children?: React.ReactNode;
}

export const MyComponent: React.FC<MyComponentProps> = ({
  title,
  description,
  className,
  children
}) => {
  return (
    <div className={cn('base-classes', className)}>
      <h2>{title}</h2>
      {description && <p>{description}</p>}
      {children}
    </div>
  );
};
```

Best practices:
- Use TypeScript and functional components
- Define explicit prop interfaces
- Add loading/error states
- Memoize expensive subtrees
- Handle edge cases and empty states

### Styling Guidelines

Tailwind CSS:
```tsx
<div className="flex items-center justify-between p-4 bg-white rounded-lg shadow">
  <span className="text-lg font-semibold">Content</span>
</div>

import { cn } from 'lib/utils';
<div className={cn(
  'base-class',
  isActive && 'active-class',
  isDisabled && 'opacity-50 pointer-events-none',
  className
)} />
```

Variants with class-variance-authority:
```ts
import { cva } from 'class-variance-authority';

export const buttonVariants = cva(
  'inline-flex items-center justify-center rounded-md font-medium transition-colors',
  {
    variants: {
      variant: {
        default: 'bg-primary text-white hover:bg-primary/90',
        outline: 'border border-input hover:bg-accent',
        ghost: 'hover:bg-accent',
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 px-3',
        lg: 'h-11 px-8',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
);
```

---

## Working with Supabase

### Supabase Client

```ts
import { createClient } from '@supabase/supabase-js';

export const supabase = createClient(
  import.meta.env.VITE_SUPABASE_URL!,
  import.meta.env.VITE_SUPABASE_ANON_KEY!
);
```

Queries:
```ts
// Select
const { data, error } = await supabase
  .from('lessons')
  .select('*')
  .eq('user_id', userId)
  .order('created_at', { ascending: false });

// Insert
const { data: inserted, error: insertError } = await supabase
  .from('lessons')
  .insert({ user_id: userId, title: 'New Lesson', content: '...' })
  .select()
  .single();

// Update
const { data: updated, error: updateError } = await supabase
  .from('lessons')
  .update({ title: 'Updated Title' })
  .eq('id', lessonId)
  .select()
  .single();

// Delete
const { error: deleteError } = await supabase
  .from('lessons')
  .delete()
  .eq('id', lessonId);
```

Error handling:
```ts
try {
  const { data, error } = await supabase.from('lessons').select('*');
  if (error) throw error;
  return data;
} catch (e) {
  console.error('Error fetching lessons:', e);
  // toast.error('Failed to load lessons');
  return [];
}
```

### Authentication

Using an Auth context:
```tsx
import { useAuth } from 'contexts/AuthContext';

function MyComponent() {
  const { user, signIn, signUp, signOut, isLoading } = useAuth();

  if (isLoading) return <div>Loading...</div>;
  if (!user) return <div>Please sign in</div>;

  return <div>Welcome, {user.email}</div>;
}
```

Protected routes:
```tsx
import { ProtectedRoute } from 'components/auth/ProtectedRoute';

<Route
  path="/lessons"
  element={
    <ProtectedRoute>
      <LessonPlanning />
    </ProtectedRoute>
  }
/>
```

---

## Edge Functions (Deno)

Structure:
```ts
// supabase/functions/my-function/index.ts
import { serve } from "https://deno.land/std@0.168.0/http/server.ts"

serve(async (req) => {
  try {
    const { param1, param2 } = await req.json();
    if (!param1) {
      return new Response(JSON.stringify({ error: 'param1 is required' }), {
        status: 400,
        headers: { 'Content-Type': 'application/json' }
      });
    }
    const result = await processData(param1, param2);
    return new Response(JSON.stringify({ success: true, data: result }), {
      headers: { 'Content-Type': 'application/json' }
    });
  } catch (error) {
    return new Response(JSON.stringify({ error: error.message }), {
      status: 500,
      headers: { 'Content-Type': 'application/json' }
    });
  }
});
```

External APIs (OpenRouter):
```ts
const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${Deno.env.get('OPENROUTER_API_KEY')}`,
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    model: 'anthropic/claude-3.7-sonnet',
    messages: [{ role: 'user', content: prompt }],
    max_tokens: 2000,
  }),
});

const data = await response.json();
```

Deployment:
```bash
# Deploy single function
supabase functions deploy my-function

# Deploy all functions
supabase functions deploy

# View logs
supabase functions logs my-function
```

CORS headers:
```ts
export const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
};
```

---

## State Management with React Query

Setup:
```tsx
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5,
      cacheTime: 1000 * 60 * 30,
    },
  },
});

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <YourApp />
    </QueryClientProvider>
  );
}
```

Custom hooks:
```ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { supabase } from 'integrations/supabase/client';

export const useLessons = (userId: string) =>
  useQuery({
    queryKey: ['lessons', userId],
    queryFn: async () => {
      const { data, error } = await supabase
        .from('lessons')
        .select('*')
        .eq('user_id', userId);
      if (error) throw error;
      return data;
    },
  });

export const useCreateLesson = () => {
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: async (lesson: any) => {
      const { data, error } = await supabase
        .from('lessons')
        .insert(lesson)
        .select()
        .single();
      if (error) throw error;
      return data;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['lessons'] });
      // toast.success('Lesson created successfully');
    },
    onError: () => {
      // toast.error('Failed to create lesson');
    },
  });
};
```

---

## Testing

Unit testing with Vitest + RTL:
```ts
import { describe, it, expect } from 'vitest';
import { render, screen } from '@testing-library/react';
import { MyComponent } from './MyComponent';

describe('MyComponent', () => {
  it('renders title', () => {
    render(<MyComponent title="Test Title" />);
    expect(screen.getByText('Test Title')).toBeInTheDocument();
  });
});
```

Integration testing (API contract):
```ts
describe('Lesson API', () => {
  it('fetches lessons', async () => {
    const lessons = await fetchLessons(userId);
    expect(Array.isArray(lessons)).toBe(true);
  });
});
```

---

## Performance Optimization

Code splitting:
```tsx
import { lazy, Suspense } from 'react';
const LessonPlanning = lazy(() => import('./pages/LessonPlanning'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <LessonPlanning />
    </Suspense>
  );
}
```

Memoization:
```tsx
import { memo, useMemo, useCallback } from 'react';

export const ExpensiveComponent = memo(({ data }) => {
  return <div>{/* ... */}</div>;
});

const sortedData = useMemo(
  () => data.slice().sort((a, b) => a.value - b.value),
  [data]
);

const handleClick = useCallback(() => doSomething(id), [id]);
```

Lazy loading images:
```tsx
// components/performance/LazyImage.tsx
export function LazyImage(props: React.ImgHTMLAttributes<HTMLImageElement>) {
  return <img loading="lazy" {...props} />;
}
```

---

## Notes

- Store secrets in Supabase or server env; never expose in client
- Enforce RLS on all tables
- Use rate limiting for public functions
- Prefer Edge Functions for AI and external API calls
